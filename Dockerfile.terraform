# Dockerfile.terraform

FROM hashicorp/terraform:1.9.5

# ------------------------------------------------------------------
# Install dependencies + Google Cloud SDK
# ------------------------------------------------------------------
RUN apk add --no-cache bash curl python3 py3-pip libc6-compat git \
    && curl -sSL https://dl.google.com/dl/cloudsdk/channels/rapid/downloads/google-cloud-cli-470.0.0-linux-x86_64.tar.gz \
    | tar -xz -C /usr/local \
    && ln -s /usr/local/google-cloud-sdk/bin/gcloud /usr/local/bin/gcloud

# ------------------------------------------------------------------
# Working directory for Terraform
# ------------------------------------------------------------------
WORKDIR /workspace

# ------------------------------------------------------------------
# Do NOT override entrypoint â€” let docker-compose handle commands
# ------------------------------------------------------------------
ENTRYPOINT []

# ------------------------------------------------------------------
# Default command: shell (so you can run terraform or gcloud easily)
# ------------------------------------------------------------------
CMD ["/bin/bash"]
